<% include ../widgets/layout %>

<div id="page-wrapper">
  <div class="container-fluid">
    <div class="row bg-title">
      <div class="col-lg-12">
        <h4 class="page-title">Knowledge</h4>
        <ol class="breadcrumb">
          <li><a href="#">Dashboard</a></li>
          <li class="active">Add knowledge questions</li>
        </ol>
      </div>
      <!-- /.col-lg-12 -->
    </div>
    <!-- row -->
    <div class="row">
      <div class="col-md-12">
        <div class="white-box">
          <form action="<%= url %>" method="POST" enctype="multipart/form-data">
              <input type="hidden" name="_method" value="PUT">
              <input type="hidden" name="id" value="<%= dat._id %>">
            <div class="form-group">
              <label for="title">Questions</label>
              <input
                type="text"
                name="question"
                class="form-control"
                id="title"
                value="<%= dat.question %>"
                placeholder="Enter Question to be Ask ?"
              />
            </div>
            <div class="form-group">
              <label for="type">Response type</label>
              <select
                class="form-control form-control-sm"
                name="responseType"
                id="exp"
              >
                <option value="text">Text</option>
                <option value="numeric">Number</option>
                <option value="image">Image</option>
                <!-- <option value="yes/no">Yes/No</option> -->
              </select>
            </div>
            <div class="form-group" id="cfield">
             
            </div>


            <div class="form-group " id="option1">
              
            </div>

            <div class="form-group" id="image-score">
             
            </div>
            <div class="form-group" id="yes-no">
             
            </div>
            <button type="button" onclick="insertHtml();">Add Field</button>
            <!-- <button type="button" onclick="getOption();">Enter options</button> -->

            <div class="form-group">
              <label for="qtype">Question type</label>
              <select class="form-control form-control-sm" name="type">
                <option>Select Type</option>
                <option value="kitchen">Kitchen</option>
                <option value="bathroom">Bathroom</option>
                <option value="garden">Garden</option>
                <option value="laundry">Laundry</option>
              </select>
            </div>

            
            <% if(dat.image)  { %>
            <% for (var i =0; i <=dat.image.length;  i++ ) { %>
              <div class="image-show"><img src="<%= dat.image[i] %>" alt="" width="100px" height="100px"></div>
             
              <% } %>
              <% } %>
           
            <input type="submit" class="btn btn-primary" value="Add question" />
          </form>
        </div>
      </div>
    </div>
    <!-- /.row -->
  </div>
</div>
<script>
  let value;
  let elementValue=0;

  // let data = selectele.options[selectele.selectedIndex];
function insertHtml(){
  var selectele = document.querySelector("#exp");
    value = selectele.value;

    console.log(selectele.value);
  elementValue=elementValue+1;
  var div=document.createElement("div");

  var html =
      `<div class='row'><div class='col-sm-6'><label for='title'>Option ${elementValue}</label><input type='text' name='option' class='form-control' placeholder='Enter First Option'/></div>`;
        html+=`<div class='col-sm-6'><label for='score'>Score ${elementValue}</label><input type='number' name='score' class='form-control'  placeholder='Score to be Given on this option'/></div></div>`;
        div.innerHTML=html;
        if (value=="text") {
          document.getElementById('option1').append(div);   
        }else{
          if (value=="numeric") {
            document.getElementById('cfield').append(div); 
          }else{
            if (value=='image') {
              var div=document.createElement("div");

var html =
    `<div class='row'><div class='col-sm-6'><label for='title'>Image ${elementValue}</label><input type='file' name='image' class='form-control-file' id='image' multiple='multiple'/></div>`;
      html+=`<div class='col-sm-6'><label for='score'>Score ${elementValue}</label><input type='number' name='score' class='form-control'  placeholder='Score to be Given on this option'/></div></div>`;
      div.innerHTML=html;
      document.getElementById('image-score').append(div); 
            }
          }
        }
       
}


 
</script>
<% include ../widgets/footer %>
